
《SUPER: Safety-assured high-speed navigation for MAVs》2025.1 science robotics

### 前言
传统的感知-建图-规划-优化无人机导航架构，且为不可学习结构。特点是使用激光雷达（点云）实现高速飞行，直接在点云上进行数据处理，使用双航线规划，MINCO作为轨迹参数，空中走廊进行优化

主要成果
1. 使用点云的分阶段导航，高速自主避障飞行
2. 高安全性与鲁棒性
3. 超越现有SOTA

核心技术
1. 紧凑硬件平台；高推重比
2. 精简建图，提出不进行建图而是直接在点云进行操作，维持滑动窗口点云
3. 规划算法，来自FASTER的双轨迹规划
4. 数学优化，提出CIRI基于点云生成飞行走廊，使用MINCO描述轨迹

---
双轨迹规划
每一个规划周期，系统会生成两条轨迹，一条探索轨迹e，一条备份轨迹b；其中探索轨迹是激进的，在整个空间中直奔目标；而备份轨迹是保守的，严格限制在当前lidar已探明的已知空间中。而b和e的前面一部分是重合的，只在后面有分叉。

具体而言，将这个问题分为两个子问题：空间生成（哪里能飞）和轨迹优化（怎么飞最快）

第一步 生成飞行走廊
为了避免地图搜索，作者提出了CIRI，直接在点云基础上“吹”出安全气泡。
探索走廊e
1. 使用 A* 算法找一条粗略路径。
2. 在路径上撒点，生成凸多面体。
3. **关键点：** 这里的多面体构建**不考虑未知区域**，允许气泡延伸到LiDAR看不见的地方

备份走廊b
1. **难点：** 以前的方法（如Faster）需要用栅格地图（OGM）来判断哪里是已知、哪里是未知，计算量巨大。
2. **创新（Theorem 1）：** 作者提出了一个定理。简单来说，只要一个凸多面体是基于当前LiDAR视锥（FOV）内的点云生成的，并且包含当前无人机位置，那么这个多面体**一定完全处于“已知自由空间”内**。
3. **做法：** 依据这个定理，直接利用点云数据生成严格受限的安全走廊，**完全绕过了耗时的栅格地图光线投射**。

第二步 时空轨迹优化
确定了走廊，即空间约束后，需要生成平滑的曲线
这里使用MINCO轨迹参数化，用多项式描述轨迹，将约束问题转换为梯度下降的无约束问题，目标函数 J = 平滑度 + 总时间 + 避障惩罚

>什么是MINCO？见参数化曲线部分笔记[[参数化曲线表示4-MINCO]]

第三步 动态切换点优化
提出双轨迹策略的FASTER，其从探索轨迹切换到备份轨迹的时间是人为设定的固定值；而SUPER则将这个时间也作为优化变量


具体分析
第一步 生成飞行走廊
生成探索走廊，连接起点与终点：
输入当前的点云地图，然后用A* 搜索一条起点到终点的路径，这条轨迹是离散的点。然后从起点开始，逐个遍历当前能看到的最远的点，将这些点链接起来，有了一组线段种子。对于每一段线段种子，生成一个包裹住线段的初始椭球，并不断膨胀，直至碰到最近的障碍物点，在该点出生成一个切平面，然后把障碍物切出去。重复该过程，最终剩下的空间就是一个凸多面体。关键，CIRI是在configuration space中运行的，即将障碍物扩大无人机半径的空间。
![[SUPER探索走廊生成.png]]

生成备份走廊
备份走廊须严格位于已知空间内，而传统的方法根据栅格图来判断，很慢；SUPER直接用点云图判断
![[SUPER备份走廊生成.png]]
直观理解，lidar的激光能直接够扫到的空间中都是安全空间。在前面已经生成了探索轨迹e，而从当前位置出发，找到能看到最远的e上的点s，将线段(pc,s)作为备份走廊的种子，同样用CIRI可以得到一个备份走廊

第二步 轨迹优化，在飞行走廊中算出具体的飞行曲线
首先，super中使用MINCO来参数化轨迹，一条M段轨迹p(t)可以用以下两组变量表示：
- 空间变量Q：航线点q1,...,qM-1
- 时间变量T：每一段的飞行时间T1,...,TM
有p(t)=MINCO(Q, T start, end)。

于是要求出使代价函数最小的Q，T——>代价函数如何设计

探索轨迹代价函数
![[SUPER探索轨迹代价函数.png]]
首先是平滑度约束，直接求轨迹高阶导数积分。（例如4阶导数：原函数为位置，1阶导数为速度，2阶为加速度，3阶jerk为加加速度，4阶为snap）
第二是时间约束，简单地是Ti求和
第三是航点约束，最为关键
![[SUPER探索轨迹走廊约束.png]]
qi是航线点，ai是第i个多边形与第i+1个多边形重叠区域的中心点，即确保qi被吸引至ai
最后是约束条件
![[SUPER探索轨迹优化约束条件.png]]
文中使用了某方法将其这个约束问题转换为无约束问题，这样更方便用L-BFGS求解

这个看起来很好理解，但是这么简单就可以起作用吗？

备份轨迹优代价函数
SUPER将切换时间也作为优化变量放入了求解器
物理设定
起点：探索轨迹时间为ts的点
终点：安全走廊的某处pstop（由算法决定的一点），且速度与加速度为0

代价函数
将走廊约束替换为备用走廊，其次将航点约束更改为 -ts，以尽量最大化切换时间。注意相较于探索代价函数，备份代价函数还增加了两个变量，切换时间ts与最终位置pstop，p替换了求MINCO时的终点位置

此外，还需要一个约束让备用轨迹的起点在备用走廊内。


---
滑动窗口

