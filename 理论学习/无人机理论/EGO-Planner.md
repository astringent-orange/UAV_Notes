
《EGO-Planner: An ESDF-free Gradient-based Local  Planner for Quadrotors》2020.8 IEEE ROBOTICS AND AUTOMATION LETTERS

### 前言
和后来的端到端算法进行区分，是一个分阶段（感知-建图-规划-优化）的算法，并且是不可学习的手工设计算法

其中感知-建图 首先会得到占据栅格图（仅用0，1）判断一个位置是否有障碍物。传统方法会在其基础上继续求出ESDF，而EGO则不用求出ESDF，于是减少了整体70%的时间。

而规划/优化，表现为求解无约束的非线性优化问题，然后用梯度下降法求解。以ego为例，整个曲线是以B样条表示的，即主要由控制点来决定，那么规划就是求解一个以 控制点位置为变量 的代价函数的最小值问题。理想情况下可以求解最小值问题可以得到一组控制点的位置，但实际上只能通过梯度下降，不断逼近最小值。

于是代价函数的设计边便成为了重点，而在使用中规划部分有一个代价函数，优化部分也有一个代价函数（文中为了区分称为惩罚函数）。

---
整个运行流程初始时，首先由A* 算法给出一条折线路径，然后在折线上取若干控制点转换为B样条路径，于是完成了初始化。之后进入一个循环
![[ego 规划循环.png]]
首先检查每一个控制点是否发生碰撞，如果发生碰撞则通过优化函数将控制点的位置“推”到障碍物外来避免碰撞。然后再对路径进行优化，在保持路径形状的情况下拉伸坐标点并修改间隔时间，确保障无人机在不碰撞的前提下还能飞得快。

具体而言，对于检测到碰撞的轨迹段，用A* 生成一个无碰撞的引导路径；而发生碰撞的轨迹段的每个控制点Q都会生成一个在障碍物表面的锚点p，从而有一个排斥方向向量

