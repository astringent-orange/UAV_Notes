---
date: 2025-11-04
tags:
  - 机载电脑
  - 远程
---

### 远程登陆
#### 1. 手机热点ssh连接
将笔记本与机载电脑连接在同一局域网（手机热点）下，然后通过ssh进行连接。

机载电脑首次连接局域网需要通过外部设备操作，后续可以自动连接。

#### 2. 以太口连接
需修改电脑以太网配置中ipv4协议，手动设置ip为与机载电脑网口同一网段

**2.1 Atlas**
官方的22.04中eth1的默认静态ip为192.168.0.100；
而旧版本的20.04的默认ip为官方文档中的192.168.137.100
用户名HwHiAiUser 密码Mind@123

**2.2 Sunrise**
以太口默认ip为192.168.1.10
用户名 sunrise 密码 sunrise
使用ttyACM0端口

**2.3 NUC13ANKi7-1360P**
设置以太网ipv4静态ip为192.168.1.11
用户名drone 密码 123456

ps：使用kitty连接Ubuntu 20.04的机器时，需要使用kitten ssh而非普通的ssh，后者会因为缺少xterm-kitty文件，导致字符串显示异常


#### 3. 更多方法
一般实验室中笔记本远程连接机载电脑有三种方式
（1）以太网口连接。稳定
（2）使用小型路由器（不需要外接网线），将两者连接在同一局域网。
（3）使用手机热点

更多如军事用途，要求更高的稳定性则可以使用光纤

---
### 验证机载电脑与FCU联通
##### ✅ 标准检查步骤
###### 🪫 第 1 步：连接硬件
- PX4 飞控上电；
- 机载电脑通过 `/dev/ttyACM0`（或你自己的串口）连接；
- 确认设备存在：
    `ls /dev/ttyACM*`
    如果能看到 `/dev/ttyACM0`，说明连接物理上 OK。
    这里是PX4会模拟为一个串口设备，故该名称是由飞控决定的，只要飞控不更换，都可以继续使用该名称
---
###### ⚙️ 第 2 步：启动 MAVROS
在机载电脑上执行：
```
roscore
source /opt/ros/humble/setup.bash 
roslaunch mavros px4.launch fcu_url:=/dev/ttyACM0:57600
rostopic list
watch -n 1 "rostopic echo /mavros/imu/state"
```
`


---
### 便捷设置

1. 使用密钥登陆ssh
2. 修改机载电脑的 `~/.bashrc`直接进入ros工作空间
3. 修改ssh中服务器别名

---
### 常见问题

#### 1. Vscode远程登陆后掉线
机载电脑端vscode server占用资源过多，容易掉线，建议 `rm -rf ~/.vscodeserver` 删除机载电脑端vscode服务器，仅使用终端窗口远程连接


#### 2. 飞控警报声

**2.1 急促警报声**
直接CTRL+c关闭mavros节点后，发出急促的警报声。因为此时飞控在offboard模式下，突然失去了外部信号指令，认为断连触发failure

*解决方法*
使用正确的关闭窗口方法
（1）关闭控制节点
（2）使用遥控或MAVROS命令行切换模式
`rosservice call /mavros/set_mode "custom_mode: 'MANUAL'"`
然后`rostopic echo -n 5 /mavros/state ` 检查mode
（3）上锁
`rosservice call /mavros/cmd/arming "value: false"`
检查 `rostopic echo -n 5 /mavros/state`
（4）最后关闭mavros节点

**2.2 短暂警报声**
在连接电脑调试时，尝试解锁无人机时发出警报声。
可能原因有（1）在室内GPS无定位触发警报；（2）没有连接电池，飞控检测到电压异常；（3）offboard安全模式不满足

*解决方法*
暂时注释掉arm解锁部分代码，重新编译
