# CPP


# Python
在ros1项目中python自定义库文件的使用需要遵循一定的方法，需要手动进行一些设置，因为ros1在设计时（2007）主要是为了cpp而设计的，许多python功能需要手动添加。而在ros2中就有了python的自动支持。

如果不进行这些操作，rosrun无法正常使用（当然直接python运行则可以）

以以下这个功能包`agent`为例，一般的python文件都放在scripts下，而需要被引用的库文件需要在src下新建一个同名文件夹。
```text
agent/
├── CMakeLists.txt
├── package.xml
├── setup.py                 <-- 1. “安装图纸”
├── scripts/
│   └── train.py             <-- 2. “可执行脚本”：可以引用下面的库
└── src/
    └── agent/               <-- 3. “库文件夹”：名字必须和包名一致
        ├── __init__.py      <-- 4. 标识这是一个 Python 包
        ├── envs/
        │   ├── __init__.py
        │   └── drone_env.py
        └── utils/
            ├── __init__.py
            └── helper.py
```
其中有一个与cmakelist同级的`setup.py`文件，有如下内容
```python
from distutils.core import setup
from catkin_pkg.python_setup import generate_distutils_setup

d = generate_distutils_setup(
    packages=['agent'],     # 告诉系统：src/agent 文件夹是一个包
    package_dir={'': 'src'} # 告诉系统：源码在 src 目录下
)
setup(**d)
```
库文件夹及其下每一个文件夹都要有一个`__init__.py`，其中可以有以下内容
1. 留空，单纯表示该文件夹是一个python包
2. 加入一些一启动就需要执行的逻辑
3. 将一些类提高层级

最后需要在`CMakeLists.txt`中加入`catkin_python_setup()`然后编译，即可成功使用，可以在其他功能包中使用这些库文件。

